# Brooks VM Environment Template (Microservices)
# Production-ready defaults for a VM + Docker DB/Redis deployment.
# Review all values before deployment.

# ==========================================
# Postgres Superuser (container init)
# ==========================================
POSTGRES_USER=brooks
POSTGRES_PASSWORD=CHANGE_ME_SUPERUSER_PASSWORD

# ==========================================
# Service Database Users / Passwords / Names
# ==========================================
AUTH_DB_USER=auth_user
AUTH_DB_PASSWORD=CHANGE_ME_AUTH_DB_PASSWORD
AUTH_DB_NAME=auth_db

SOCIAL_DB_USER=social_user
SOCIAL_DB_PASSWORD=CHANGE_ME_SOCIAL_DB_PASSWORD
SOCIAL_DB_NAME=social_db

LISTS_DB_USER=lists_user
LISTS_DB_PASSWORD=CHANGE_ME_LISTS_DB_PASSWORD
LISTS_DB_NAME=lists_db

PINS_DB_USER=pins_user
PINS_DB_PASSWORD=CHANGE_ME_PINS_DB_PASSWORD
PINS_DB_NAME=pins_db

MODERATION_DB_USER=moderation_user
MODERATION_DB_PASSWORD=CHANGE_ME_MODERATION_DB_PASSWORD
MODERATION_DB_NAME=moderation_db

# ==========================================
# Service Database URLs (point to the DB host)
# ==========================================
AUTH_DB_URL=jdbc:postgresql://postgres:5432/auth_db
SOCIAL_DB_URL=jdbc:postgresql://postgres:5432/social_db
LISTS_DB_URL=jdbc:postgresql://postgres:5432/lists_db
PINS_DB_URL=jdbc:postgresql://postgres:5432/pins_db
MODERATION_DB_URL=jdbc:postgresql://postgres:5432/moderation_db

# ==========================================
# Auth0 (Backend)
# ==========================================
AUTH0_ISSUER_URI=https://your-tenant.auth0.com/
AUTH0_AUDIENCE=https://your-api-audience

# ==========================================
# JWT (Auth Service)
# ==========================================
BROOKS_JWT_SECRET=CHANGE_ME_LONG_RANDOM_STRING_AT_LEAST_32_CHARACTERS
BROOKS_JWT_ISSUER=brooks
BROOKS_JWT_ACCESS_TTL=900
BROOKS_JWT_REFRESH_TTL=2592000

# ==========================================
# CORS
# ==========================================
BROOKS_WEB_ORIGINS=https://your-frontend-domain

# ==========================================
# Internal Service-to-Service Auth
# ==========================================
INTERNAL_SERVICE_KEYS=CHANGE_ME_INTERNAL_KEY
INTERNAL_SERVICE_ALLOWED_NAMES=pins-service
INTERNAL_SERVICE_KEY_MAP=pins-service=CHANGE_ME_INTERNAL_KEY
INTERNAL_SERVICE_KEY=CHANGE_ME_INTERNAL_KEY
INTERNAL_SERVICE_NAME=pins-service

# ==========================================
# Service URLs (internal service-to-service)
# ==========================================
SOCIAL_SERVICE_URL=http://social-service:8082
LISTS_SERVICE_URL=http://lists-service:8083

# ==========================================
# Pins Cleanup / Proximity
# ==========================================
BROOKS_BUCKET_SIZE_DEG=0.01
BROOKS_CLEANUP_ENABLED=true
BROOKS_CLEANUP_BATCH_SIZE=1000
BROOKS_CLEANUP_RETENTION_DAYS=7
BROOKS_CLEANUP_CRON="0 0 2 * * ?"

# ==========================================
# Media Service
# ==========================================
MEDIA_UPLOAD_BASE_URL=https://your-upload-host.example.com

# ==========================================
# Frontend (Vite build args)
# ==========================================
VITE_AUTH_API_URL=https://your-domain/api
VITE_AUTH0_DOMAIN=your-tenant.auth0.com
VITE_AUTH0_CLIENT_ID=YOUR_AUTH0_CLIENT_ID
VITE_AUTH0_AUDIENCE=https://your-api-audience
VITE_AUTH0_REDIRECT_URI=https://your-frontend-domain

VITE_SOCIAL_API_URL=https://your-domain/api/social
VITE_LISTS_API_URL=https://your-domain/api/lists
VITE_PINS_API_URL=https://your-domain/api/pins
VITE_MEDIA_API_URL=https://your-domain/api/media
VITE_MODERATION_API_URL=https://your-domain/api/moderation
VITE_NOTIFICATIONS_API_URL=https://your-domain/api/notifications

VITE_MAP_PROVIDER=leaflet
VITE_GOOGLE_MAPS_KEY=
VITE_NOMINATIM_URL=https://nominatim.openstreetmap.org/reverse
VITE_LEAFLET_TILE_URL=https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png
VITE_LEAFLET_ATTRIBUTION="&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>"
VITE_DEFAULT_CENTER_LAT=41.9028
VITE_DEFAULT_CENTER_LNG=12.4964

# ==========================================
# Redis
# ==========================================
REDIS_HOST=brooks-redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_CACHE_TTL_SECONDS=60
